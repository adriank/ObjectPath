<!DOCTYPE html>
<html lang="en">
	<head>
		<title>ObjectPath Reference</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ObjectPath Reference" />
		<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.1/css/bootstrap.min.css" rel="stylesheet">
		<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
		<link href="css/ac.css" rel="stylesheet">
		<link href="css/app.css" rel="stylesheet">
		<link href="css/shjs/sh_style.css" rel="stylesheet">
	</head>
	<body>

		<div class="pull-left mh16 menu affix">
			<a href="/" class="inline-block m16">
				<i class="fa fa-home fa-2x"></i><span class="sr-only">Home</span>
			</a><br/>
			<a href="/tutorial.html" class="inline-block m16">
				<i class="fa fa-certificate fa-2x"></i><span class="sr-only">Tutorial</span>
			</a><br/>
			<a href="/reference.html" class="inline-block m16">
				<i class="fa fa-book fa-2x"></i><span class="sr-only">Documentation</span>
			</a><br/>
			<a href="/implementations.html" class="inline-block m16">
				<i class="fa fa-download fa-2x"></i><span class="sr-only">Install</span>
			</a>
		</div>

		<div class="pull-right mh16 social">
			<a href="//twitter.com/ObjectPath" target="_blank" class="inline-block m16">
				<i class="fa fa-twitter fa-3x"></i>
			</a>
			<a href="//github.com/adriank/ObjectPath" target="_blank" class="inline-block m16">
				<i class="fa fa-github fa-3x"></i>
			</a>
		</div>

		<div class="container">
			<div class="logo"><a href="/ObjectPath">ObjectPath</a> <small>>> tutorial</small></div>
		</div>

		<div class="container tutorial">
			<h1>Tutorial <small>Start using ObjectPath's interactive shell in no time</small></h1>
			<div role="alert" class="alert alert-warning">
				<i class="fa fa-warning fa-3x pull-left"></i><strong>Warning!</strong> WORK IN PROGRESS!</strong><br>
				This tutorial is a stub. If you'd like to help writing it, <a href="//github.com/adriank/ObjectPath/fork">fork ObjectPath on Github</a> and submit a pull request.

			</div>
			<!--<p class="lead">We'll explore free weather data from <a href"http://openweathermap.org/current">openweathermap.org</a>.</p>-->
			<p class="lead">We'll work with the following JSON document:</p>
			<pre class="sh_python">{
	"store": {
		"book": [
			{
				"category": "reference",
				"author": "Nigel Rees",
				"title": "Sayings of the Century",
				"price": 8.95
			},
			{ 
				"category": "fiction",
				"author": "Evelyn Waugh",
				"title": "Sword of Honour",
				"price": 12.99
			},
			{ 
				"category": "fiction",
				"author": "Herman Melville",
				"title": "Moby Dick",
				"isbn": "0-553-21311-3",
				"price": 8.99
			},
			{ 
				"category": "fiction",
				"author": "J. R. R. Tolkien",
				"title": "The Lord of the Rings",
				"isbn": "0-395-19395-8",
				"price": 22.99
			}
		]
	}
}</pre>

			<h2>Installing and running</h2>
			<h3>Python</h3>
			<p>Install the newest version from GitHub:</p>
			<pre>$ git clone https://github.com/adriank/ObjectPath.git
$ cd ObjectPath
$ python shell -h
usage: shell [-h] [-u URL] [-xml] [-d] [FILE]

Command line options

positional arguments:
	FILE               File name

optional arguments:
	-h, --help         show this help message and exit
	-u URL, --url URL  URL containing JSON document.
	-xml               [EXPERIMENTAL] Expect XML input.
	-d, --debug        Debbuging on/off.</pre>
		<p>To use localization features you need python-tz package installed on your machine.</p>
		<p>You can also run ObjectPath in PyPy, the faster Python implementation:</p>
		<pre>pypy objectpath</pre>
		
		<div role="alert" class="alert alert-warning">
			<i class="fa fa-warning fa-3x pull-left"></i><strong>Heads up!</strong> You can try ObjectPath without installing it on your box (though with limited functionality!). Open a developer console of your choice (right click here and click <em>inspect element</em>, then <em>console</em>) and use ObjectPath JavaScript implementation to test the language . Just write:
			<pre>op.exe("2+2")</pre>
		</div>
		<h2>Basics</h2>
		<p>Before getting your hands dirty read through the language basics, even if you're an experienced programmer - some sugar can be found here.</p>
		<h2>Basic arithmetics</h2>
		<p>ObjectPath supports common arithmetics:</p>
		<ul>
			<li>addition (+)</li>
			<li>subtraction (-)</li>
			<li>multiplication (*)</li>
			<li>division (/)</li>
		</ul>
		<pre class="sh sh_python">2+2*2 -> 6
(2+2)*2 -> 8
8/5 -> 1.6 
17 % 3 -> 2 #remainder of division</pre>
		<h2>Working with strings</h2>
		<p>ObjectPath provides a range of tools to manipulate strings. Strings are written as:</p>
		<pre class="sh_python">"text" or 'text'</pre>
		<p>Strings can be concatenated by <code>+</code> sign:</p>
		<pre class="sh_python">"Hello "+"World!" -> "Hello World!"</pre>
		<p>Numbers can be concatenated with strings if string is on the left-hand side of + sign</p>
		<pre class="sh_python">"Hello "+2+"!" -> "Hello World!"
2+" Hello!" -> error (in JS you'll see NaN, which is a bug)
""+2+" Hello!" -> "2 Hello!"</pre>
		<p>In the Python version of ObjectPath it's also possible to do some crazy things like:</p>
		<pre class="sh_python">3*"a" -> "aaa"
"Hello %s"%"World!" -> "Hello World!"</pre>
		<p>To access specific parts of the string, use the following:</p>
		<pre class="sh_python"># To get the first character of the string
"Hello World!"[0] -> "H" # We count letters starting from 0!
# To get the last character of a string:
"Hello World!"[-1] -> "!"
# To get the substring "Word"
slice("Hello World!",[6,11]) -> "World"
# or in the Javascript version:
"Hello World!"[6:11] -> "World"</pre>
			<p>ObjectPath also offers a vast range of functions that can do the following tricks on strings (currently available only in the Python version):</p>
			<pre class="sh_python">len("Hello") -> 5
upper("Hello") -> "HELLO"
lower("Hello") -> "hello"
title("Hello world") -> "Hello World"
capitalize("hello world") -> "Hello world"
split("hello world"," ") -> ["Hello","world"]
replace("hello world!","world","moon") -> "Hello moon!"
# replace can also take advantage of regular expressions
replace("hello world!","l[^l]","r") -> "Helr worr!"</pre>
			<p>Functions can be nested:</p>
			<pre class="sh_python">upper(replace("hello world!","world","moon")) -> "HELLO MOON!"</pre>

			<h2>Simple queries</h2>
			<p>Putting the boring stuff aside we fast forward to queries. Simple queries starts with <code>$</code> character. It indicates the root of the document. To show the whole document write:</p>
			<pre class="sh_python">$</pre>
			<p>ObjectPath is like paths to files in your operating system. <code>.</code> means we want to go one level deeper in JSON document (equivalent to / on Unix/Mac or \ on Windows in the paths to files).</p>
			<pre class="sh_python">$.store.book</pre>
			<p>This returns an array. You can select a specific element from it, filter etc:</p>
			<pre class="sh_python">$.store.book[1] # get the second book
$.store.book[-1] # get the last book
$.store.book[2:4] # get the 3rd and 4th book</pre>
			<p>We can also get specific elements based on their properties:</p>
			<pre class="sh_python">$.store.book[@.price is 0.99] # get books of price 0.99</pre>
			<p><code>@</code> points to the current element from books. In other words, <code>[</code> iterates over the array of books and for each element checks if condition inside square parenthesis is met. <code>@</code> tells ObjectPath that <code>price</code> is an property of each book, not a string.</p>
			<p>To make it even more interesting we can filter it even further by getting only the specific fields from results:</p>
			<pre class="sh_python">$.store.book[@.price is 0.99].(price, isbn) # WARNING! works only in Python verion! filter attributes from the result</pre>
			<p>When we don't know where in the document are prices, we can search for all of them by:</p>
			<pre class="sh_python">$..price # searches for any attribute named price in the document
$..price[@ > 0.99] # returns all prices greater than 0.99</pre>
			<p>In the last example we used <code>@</code> to indicate current element of an array of prices.</p>
			<!--<p><code>*</code> is a wildcard, meaning that we want to get all things that are found there. <code>$.*</code></p>-->
		</div>

		<script src="//code.jquery.com/jquery.min.js"></script>
		<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.1/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/shjs/sh_main.min.js"></script>
		<!--<script type="text/javascript" src="js/shjs/sh_javascript.js"></script>-->
		<script type="text/javascript" src="js/shjs/sh_python.js"></script>
		<script src="//acf.acimg.eu/js/op.min.js"></script>
		<script>
		$(document).ready(function(){
			sh_highlightDocument()
		}) 
object={
"store": {
"book": [
{ "category": "reference",
"author": "Nigel Rees",
"title": "Sayings of the Century",
"price": 8.95
},
{ "category": "fiction",
"author": "Evelyn Waugh",
"title": "Sword of Honour",
"price": 12.99
},
{ "category": "fiction",
"author": "Herman Melville",
"title": "Moby Dick",
"isbn": "0-553-21311-3",
"price": 8.99
},
{ "category": "fiction",
"author": "J. R. R. Tolkien",
"title": "The Lord of the Rings",
"isbn": "0-395-19395-8",
"price": 22.99
}
],
"bicycle": {
"color": "red",
"price": 19.95
},
"k":[
{
"_id":4
}
]
}
}
		op=new ObjectPath(object)
		op.exe=function(q){return JSON.stringify(op.execute(q),false,2)}</script>

		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-36262762-3', 'adriank.github.io');
			ga('send', 'pageview');
		</script>
<!--		<script src="/js/ObjectPath/tokens.js"></script>
		<script src="/js/ObjectPath/parse.js"></script>
		<script src="/js/ObjectPath/interpreter.js"></script>
		<script src="/js/ac.js"></script>-->
		<script src="js/app.js"></script>

	</body>
</html>
